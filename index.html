<!-- Full index.html with button and routing placeholder -->
<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MULID ë³€í™˜ ì‚¬ì´íŠ¸</title>
    <style>
        body { font-family: Arial; background:#f2f2f2; margin:0; padding:20px; }
        .tool-card { padding:20px; background:white; margin-bottom:10px; border-radius:12px; cursor:pointer; }
    </style>
</head>
<body>
    <h1>ì •í†µ ë³€í™˜ ì‚¬ì´íŠ¸</h1>

    <!-- ê¸°ì¡´ ê¸°ëŠ¥ ì˜ì—­ -->
    <div class="tool-card" onclick="openTool('image-convert')">ğŸ–¼ ì´ë¯¸ì§€ ë³€í™˜</div>

    <!-- ìƒˆ ê¸°ëŠ¥: ì˜ìƒ â†’ MP3 -->
    <div class="tool-card" onclick="openTool('video-to-mp3')">ğŸµ ì˜ìƒ â†’ MP3 ë³€í™˜</div>

    <input id="fileInput" type="file" style="display:none" />

    <script>
        function openTool(tool) {
            const input = document.getElementById("fileInput");
            input.onchange = () => {
                const file = input.files[0];
                if (!file) return;
                if (tool === "video-to-mp3") convertVideoToMP3(file);
            };
            input.click();
        }

        async function convertVideoToMP3(file) {
            const form = new FormData();
            form.append("file", file);

            const res = await fetch("/api/convert/video-to-mp3", {
                method: "POST",
                body: form,
            });

            if (!res.ok) {
                alert("ë³€í™˜ ì‹¤íŒ¨!");
                return;
            }

            const blob = await res.blob();
            const url = window.URL.createObjectURL(blob);

            const a = document.createElement("a");
            a.href = url;
            a.download = file.name.replace(/\.[^/.]+$/, "") + ".mp3";
            a.click();
        }
    </script>
</body>
</html>
